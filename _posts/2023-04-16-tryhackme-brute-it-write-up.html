---
layout: post
title: TryHackMe — Brute It — Write-up
canonical_url: https://medium.com/@TheRealFREDP3D/tryhackme-brute-it-write-up-beaf013596d4?source=rss-415e107d3311------2
---

<h3>TryHackMe — Brute It — Write-up</h3><p>By <a href="https://twitter.com/TheRealFREDP3D">Frederick Pellerin</a></p><figure><a href="https://tryhackme.com/room/bruteit"><img alt="https://tryhackme.com/room/bruteit" src="https://cdn-images-1.medium.com/max/623/1*ig4UI-dtwM3rNxJnDn3pMw.png" /></a><figcaption><a href="https://tryhackme.com/room/bruteit">https://tryhackme.com/room/bruteit</a></figcaption></figure><p>In this writeup, we’ll dive into a skill-check room that tests our proficiency with fundamental tools and procedures in the world of cybersecurity. Our mission is to conquer this room by answering questions related to brute-forcing, hash cracking, and privilege escalation. If you find yourself stuck at any point, don’t worry — you can always seek out the necessary information and return later to continue our journey.</p><p>Together, we’ll unravel the mysteries of this room, step by step. I’ll walk you through my approach and the challenges I encountered during the process. Keep in mind that while I’ll share my methodology, there are countless alternative solutions out there, each as valid as the next. Let’s embark on this adventure together and explore the many paths to success.</p><h3>Section 1: Preparation</h3><p>Starting the Machine</p><figure><img alt="Obsidian — A second brain — Note teaking" src="https://cdn-images-1.medium.com/max/174/1*_jhgKPdHrFX9plvwhKwIDQ.png" /><figcaption>My note-taking app — Obsidian</figcaption></figure><p>As we embark on this journey, it’s crucial not to waste any time, especially when the target machine is booting. When I fire up a new machine, my first step is to create a new note file in my trusty note-taking application, Obsidian. Of course, you’re free to use any note-taking tool that suits your preferences, even a simple text editor will suffice. The key is to develop the habit of taking notes and meticulously documenting your actions, which is essential for effective penetration testing.</p><h4>Organizing Your Workspace</h4><p>Before diving into the more exciting aspects of this challenge, I like to keep my workspace well-organized. To do this, I create a “Brute-It” folder on my local directory and within it, a “nmap” sub-folder. This setup helps me maintain a structured approach to storing room-related files and ensures that I can easily access the resources I need during our adventure.</p><figure><img alt="" src="https://cdn-images-1.medium.com/max/1024/1*INsuSscEiDMqIx1pXph9yw.png" /></figure><h4>Preparing the Environment</h4><p>Once we obtain the target machine’s IP address, it’s time to configure our environment for smooth interaction. I fire up a terminal and add the target IP along with “bruteit.thm” to the <em>/etc/hosts</em> file. This step simplifies our access to the target machine and avoids any potential DNS resolution issues during the penetration testing process.</p><figure><img alt="" src="https://cdn-images-1.medium.com/max/960/1*Ff2M9pyIWq2Nl3LwTqhdMA.png" /><figcaption>sudo nano/etc/hosts</figcaption></figure><figure><img alt="" src="https://cdn-images-1.medium.com/max/462/1*DoBPpJEdAGD3OAfUzeBupA.png" /></figure><h3>Section 2: Enumeration</h3><h4>Discovering Open Ports</h4><p>Our journey into this challenge starts with uncovering the open ports on our target machine. To accomplish this, we’ll rely on a trusted tool: nmap. Let&#39;s launch it to see what the target machine reveals.</p><figure><img alt="" src="https://cdn-images-1.medium.com/max/1024/1*adDIvRhCfssiHY2UuQpIPg.png" /></figure><h4>What do we know now?</h4><p>The results of our nmap scan are in, and it&#39;s time to take stock of our findings. Here&#39;s what we&#39;ve discovered:</p><ol><li>Port 22: SSH — A familiar sight, as SSH is open on Port 22. With valid credentials, this is an entry point into our target.</li><li>Port 80: HTTP — Another standard port, with HTTP services running. This provides us with a web interface to investigate.</li></ol><h3>Section 3: Exploitation</h3><h4>Exploring HTTP on Port 80</h4><p>Our journey takes an exciting turn as we dive into the realm of exploitation. We start with Port 80, where we find an Apache httpd 2.4.29 server running at <em>http://bruteit.thm</em>. Our initial visit to this URL reveals nothing out of the ordinary, just the standard Apache2 Web Server Default Page.</p><h4>Unveiling Hidden Files and Directories</h4><p>But the beauty of penetration testing lies in uncovering what’s hidden. Our next step involves searching for concealed files and directories on the HTTP server. To achieve this, I turn to the trusty tool called dirsearch. It&#39;s perfect for quick, initial scans. The command we use is <em>dirsearch -u http://bruteit.thm</em>.</p><figure><img alt="" src="https://cdn-images-1.medium.com/max/589/1*nXtVQYQ2r5oeohn10x7OyQ.png" /><figcaption>dirsearch -u bruteit.thm</figcaption></figure><p>Now, the intrigue deepens as we explore the <em>/admin</em> directory. Our visit reveals a login page, but there&#39;s more to this story. When we inspect the source code of the web page, we stumble upon a hidden comment on line #26. This comment wasn&#39;t meant for us; it was intended for a mysterious figure named &quot;john.&quot;</p><figure><img alt="" src="https://cdn-images-1.medium.com/max/1024/1*YzuQbwxnNarKlgkYMzFNLg.png" /><figcaption>Login page</figcaption></figure><figure><img alt="" src="https://cdn-images-1.medium.com/max/773/1*HWsG4ruDqhJKujh6BLmy_Q.png" /><figcaption>Commentary inserted in the file source</figcaption></figure><h4>Valuable Discoveries</h4><p>This revelation unveils two critical pieces of information:</p><ol><li>The username <em>admin </em>appears to be valid.</li><li>Someone named <em>john</em> is associated with the ad<em>m</em>in account. However, keep in mind that &quot;<em>john</em>&quot; could be a potential username as well.</li></ol><p>___</p><h4>Brute-Forcing the Password</h4><p>With a potentially valid username in hand, our next task is to find the corresponding password. For this mission, we enlist the help of Hydra, a formidable brute-forcing tool. It’s known for its speed, ease of use, and well-documented capabilities. The process is straightforward: Hydra will attempt to log in using the known admin username and a wordlist. In our case, the trusty rockyou.txt serves as the password dictionary. The result? We strike gold with the following credentials:</p><ul><li>User: admin</li><li>Pass: XZXZX</li></ul><figure><img alt="" src="https://cdn-images-1.medium.com/max/551/1*7sinulXLLP1p6t-ZoPLlNA.png" /></figure><p>___</p><p>Let’s go back to the login web page to enter our new credentials.</p><figure><img alt="" src="https://cdn-images-1.medium.com/max/479/1*e8_DplnqxESLe3-pxkjUxg.png" /></figure><p>Right-Click_ and save the `id_rsa` link to your machine.</p><h3>Cracking the Hash</h3><p>Now equipped with these credentials, we return to the login web page. While there, we right-click and save the id_rsa link to our local machine. This file is a private key, a valuable credential for SSH services. However, the password is encrypted within it. To unlock its secrets, we employ the services of &quot;JohnTheRipper.&quot;</p><p>Our first step is to create a hash file from id_rsa using a Python script named ssh2john.py. With the hash file ready, we set John to work on cracking it. The moment of truth arrives, and we emerge victorious with the password: rockn-roll.</p><figure><img alt="" src="https://cdn-images-1.medium.com/max/579/1*P_3dhmuFQTsbe6a4LOV4ow.png" /></figure><p>We got a match! The **password** is: `XZXZXZXZXZXZX`</p><h4>Taking Ownership</h4><p>To put this newfound knowledge to use, we must ensure we have ownership of the id_rsa key. Changing the file permissions to make it read-only and owned by a single user (you) is the key.</p><figure><img alt="" src="https://cdn-images-1.medium.com/max/588/1*HwUgyQ_PGSUJsL4PfmyQAw.png" /></figure><figure><img alt="" src="https://cdn-images-1.medium.com/max/536/1*2g6szTRT6iM5arb__956_w.png" /></figure><p>We can check with `ls -la` that `id_rsa` is now read-only and owned by a single user, me.</p><h4>Connecting via SSH</h4><p>The time has come to put all our gathered intel into action. We connect to the target using the username john on the SSH server we discovered earlier.</p><p>And the magic happens — we gain access as “john.” With our newfound privileges, we quickly explore the target system to locate the coveted user.txt file.</p><figure><img alt="" src="https://cdn-images-1.medium.com/max/705/1*VmfFsdCQbeKt_SxF5z0WNw.png" /></figure><figure><img alt="" src="https://cdn-images-1.medium.com/max/701/1*Tf37JWC_C8MV6JhdF1uojg.png" /></figure><figure><img alt="" src="https://cdn-images-1.medium.com/max/707/1*eyk4TQyL0xQ5qBN2tyinPw.png" /><figcaption>We are in! As <em>john</em>. Check around quickly to find the <strong><em>file user.txt</em></strong></figcaption></figure><h3>Section 4: Achieving Root Access</h3><h4>The Final Step: Root Access</h4><p>Our adventure nears its climax as we set our sights on obtaining root access. To begin, we must determine what privileges “john” holds when it comes to running commands as root using sudo. A quick check reveals that &quot;john&quot; can execute cat as the root user. This knowledge opens the door to the ultimate goal: accessing the root.txt flag.</p><figure><img alt="" src="https://cdn-images-1.medium.com/max/701/1*jfKX4NRx4g2Dz5019wzR7A.png" /></figure><h4>Revealing the Root Flag</h4><p>We use the power of sudo to read the root.txt flag by executing: sudo cat /root/root.txt</p><p>But there’s one final task remaining — we must uncover the root password.</p><pre>sudo cat /root/root.txt</pre><p>There is one last task left to do. Discover the <strong><em>root </em></strong>password.</p><h4>Cracking the Root Password</h4><p>To do this, we employ the cat command once again, but this time to retrieve the /etc/passwd and /etc/shadow files on our machine. This is the foundation for our next step - cracking the password using &quot;JohnTheRipper.&quot;</p><p>First, we create a file named pass.txt with the password hashes by using the unshadow command: unshadow passwd.txt shadow.txt &gt; pass.txt</p><pre>unshadow passwd.txt shadow.txt &gt; pass.txt<br></pre><p>Then, we call upon “John” to do what he does best — crack passwords using the rockyou.txt wordlist: john --wordlist=/usr/share/wordlist/rockyou.txt pass.txt</p><p>And the moment of revelation arrives. The root password emerges from the depths of the hashes: root:xzxzxzxzxzxz:0:0:root:/root:/bin/bash</p><pre>john — wordlist=/usr/share/wordlist/rockyou.txt pass.txt</pre><pre>john — show pass.txt<br>root:xzxzxzxzxzxz:0:0:root:/root:/bin/bash<br><br>There it is! The **root password** is `football`</pre><h4>Mission Complete!</h4><p>With this final revelation, we’ve successfully reached the pinnacle of this adventure. The room is conquered, and the journey is complete.</p><p><a href="https://github.com/TheRealFREDP3D/My-Writeups/blob/main/Brute%20It/Brute%20It.md">My-Writeups/Brute It.md at main · TheRealFREDP3D/My-Writeups</a></p><img src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=beaf013596d4" width="1" height="1" alt="">
